DBstars OSKernel总体上采取了模块化设计，使用C/C++语言进行开发和编写，对于要实现的部分和功能都进行模块化的设计，这使得每个功能和模块都能够专注于自身模块的逻辑，同时主体设计上又通过“管理器”的方式给对应的模块提供了丰富的接口和函数功能的封装。<br />以进程管理为例，对于系统内核的整个进程的管理维护一个进程结构体，这个结构体有我们需要维护的各自意义下的成员和属性，但是它仅仅是作为一个结构类型而存在，同时维护了一个称为进程管理器的类，这个类提供了大量的操作进程的接口函数，它们的传入参数第一个基本都是进程结构体指针。通过这样模块化的设计和接口的分层与封装，我们在设计和开发过程中的维护会变得十分简便和容易。<br />同时为了开发和调试的方便，我们利用了SBI固件提供的汇编语言的接口首先仿照C++的cout对象实现了自己的kout对象，并且通过重载运算符的方式实现了颜色通道的扩展，并且在开发过程的大量代码中增加了相关调试信息的输出，同时在中断部分对于暂时没有实现的异常处理增加了终止程序运行并且打印RISC v的控制状态寄存器CSR的相关具体信息，等等这些人机交互上的技术和方式都极大地方便了我们调试的过程，使得出现bug时也就能够快速定位和查证，解决相关的问题。<br />整体设计上，我们中途查阅了非常多非常的的资料和相关的教材，也遇到了很多问题，即使现在在这里补充我们的开发文档，回想过去两个人一个多月高强度的开发和学习过程，依旧感触到这么一个操作系统内核的设计对于尚处大二的我们是否还是有点力不能及了，即使是在我们两人都对操作系统有着浓厚的兴趣，虽然还没有经过系统的学习，但是也都自己自学一二的情况下。不过在丰富的教学资源、热心的学长和指导老师、经验丰富的群友等的支持和帮助下，我们也最终赶着比赛截止的尾巴，完成了我们内核的总体设计（不过这一段是不是应该放到最后一个部分来讲）。<br />我们内核的设计整体上参考了ucore的教程（[ucore教程链接](https://1790865014.gitbook.io/ucore-step-by-step/)）和我们的直系学长钱品亦和李亚宁两位学长在上一届的操作系统内核赛最后提交的系统代码（[源码仓库地址](https://gitlab.eduxiji.net/qianpinyi/pal_operatingsystem)）进行设计，参考书籍主要为《操作系统精髓与设计原理（电子工业出版社）》。在初赛部分完成了操作系统内核中的启动、中断与异常、内存管理、进程管理、同步原语、文件系统、系统调用等功能的设计和部署。它们之间的关系我想对操作系统略知一二的人都应该是心知肚明的，因此这里故不再浪费笔墨介绍了，具体的设计逻辑将在下面每一部分中具体介绍。<br />同时需要强调和说明的是，我们在开发的过程中，尤其是在操作系统内核的核心部件——进程部分的开发中，添加和保留了大量的注释。我们始终坚持的一个开发理念就是，一个优秀，至少称得上是合格的工程文件，其整个编写量注释所占的比重不应该低于30%，至少是20%，良好、清楚、简洁的注释不仅会让代码文件变得易读易懂，也会让系统的开发层次和结构更加清楚，对于开发者的调试和开发也是极有用的，当然注释的要求也是大赛的硬性要求了，所以在后面具体内容的介绍中很多细节都已经体现在注释中了，难免会出现像“具体细节在相关代码处的注释中可见”的字眼，并非是我们偷懒的缘故，只是纯粹结合代码和注释会将原来的逻辑呈现和解释地更加清楚，而且重复的事情尽可能避免重复做也应该是我们代码开发人员恪守的准则吧。<br />By：谢骏鑫

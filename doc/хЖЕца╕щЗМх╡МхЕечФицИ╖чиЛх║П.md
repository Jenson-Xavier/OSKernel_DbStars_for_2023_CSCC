# 在内核里嵌入用户程序的方法

在还没有文件系统的时候，为了编写能够测试用户进程的程序，需要在内核里面嵌入用户程序
主要采用的方式是利用编译器链接提供的链接参数 `--format=binary $(USER_BINS) --format=default'`来实现

其中，左右两侧的参数指定了区域中的内容会以二进制拷贝的形式放进被链接的内容部分

在这里，将用户映像嵌入内核之后，内核如何找到这段区域呢
其实访问对于的内存指针即可找到对应的地址
这样编译链接之后用户程序会生成对应的三种符号，在内核里找到这段区域载入即可：

`
_binary_obj__user_##x##_out_start
_binary_obj__user_##x##_out_size
_binary_obj__user_##x##_out_end
`
